<!DOCTYPE html><html lang="nl"><head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 35.1.1">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
  
  
  
  
  
  
  
<script>document.title = respecConfig.title</script>
<title>DDAS API Koppelvlakspecificatie</title>
  
<title>Default</title>
  
<link rel="shortcut icon" type="image/x-icon" href="https://vng-realisatie.github.io/VNG-R-Respec-Organization-configurations/media/logo-VNG-Realisatie.ico">
  
  
  
<style>

	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: none !important;
	}
  
</style>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style id="respec-nlgov">
img.license{float:left;padding-right:5px}
</style>
<meta name="description" content="Dit is de koppelvlakspecificatie voor de API waarmee schuldhulporganisaties gegevens beschikbaarstellen aan het CBS.
Dit is een product van het programma DDAS. De API is gebaseerd op het informatie- en uitwisselmodel.">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>

  .sidelabel {
    position: fixed;
    -webkit-transform-origin: top right;
    right: 100%;
    top: 0;
    -webkit-transform: rotate(-90deg);
    padding: 4px 50px 4px 10px;
    color: white;
    white-space: nowrap;
    z-index: 1;
    background-color: #DC7633;
  }
</style>
<script type="text/javascript">
   /* Any custom mermaid.js scripts will go here. */
  </script>
<style>

  /* Any custom mermaid.js scripts will go here. */
  }
</style>
<script id="initialUserConfig" type="application/json">{
  "nl_organisationName": "VNG Realisatie",
  "nl_organisationStylesURL": "https://gitdocumentatie.logius.nl/publicatie/respec/style/",
  "nl_organisationPublishURL": "https://vng-realisatie.github.io/publicatie",
  "logos": [
    {
      "src": "https://vng-realisatie.github.io/VNG-R-Respec-Organization-configurations/media/logo-VNG-Realisatie.jpg",
      "alt": "VNG-Realisatie",
      "id": "VNG-Realisatie",
      "height": 77,
      "url": "https://www.vng.nl"
    }
  ],
  "postProcess": [
    null
  ],
  "pubDomain": "hl",
  "latestVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName"
  ],
  "thisVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/",
    "publishVersion"
  ],
  "prevVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/",
    "previousPublishVersion"
  ],
  "useLogo": true,
  "useLabel": true,
  "license": "eupl",
  "addSectionLinks": true,
  "localizationStrings": {
    "nl": {
      "cv": "Consultatieversie",
      "vv": "Versie ter vaststelling",
      "ig": "In Gebruik versie",
      "io": "In Ontwikkeling versie",
      "im": "Informatiemodel",
      "hl": "Handleiding",
      "st": "Standaard"
    }
  },
  "sotdText": {
    "nl": {
      "sotd": "Status van dit document",
      "cv": "Dit is een door het TO goedgekeurde consultatieversie. Commentaar over dit document kan gestuurd worden naar ",
      "vv": "Dit is een definitief concept van de nieuwe versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "ig": "Dit document is 'In Gebruik'.",
      "io": "Dit document is nog 'In Ontwikkeling'."
    }
  },
  "labelColor": {
    "ig": "#A569BD",
    "io": "#DC7633"
  },
  "licenses": {
    "cc0": {
      "name": "Creative Commons 0 Public Domain Dedication",
      "short": "CC0",
      "url": "https://creativecommons.org/publicdomain/zero/1.0/",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-zero.svg"
    },
    "cc-by": {
      "name": "Creative Commons Attribution 4.0 International Public License",
      "short": "CC-BY",
      "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by.svg"
    },
    "cc-by-nd": {
      "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
      "short": "CC-BY-ND",
      "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by-nd.svg"
    },
    "eupl": {
      "name": "EUROPEAN UNION PUBLIC LICENCE v. 1.2",
      "short": "EUPL",
      "url": "https://eupl.eu/",
      "image": "https://eupl.eu/eu.png"
    }
  },
  "localBiblio": {
    "MIM": {
      "href": "https://docs.geostandaarden.nl/mim/mim/",
      "publisher": "Geonovum",
      "title": "MIM - Metamodel Informatie Modellering",
      "date": "Oktober 2023",
      "rawDate": "2023"
    },
    "SemVer": {
      "href": "https://semver.org/lang/nl/",
      "title": "Semantisch Versioneren 2.0.0",
      "date": "December 19, 2023",
      "rawDate": "2023"
    }
  },
  "shortName": "Respec-template",
  "specType": "ST",
  "specStatus": "IO",
  "publishDate": "2025-02-11",
  "publishVersion": "0.21",
  "title": "DDAS API Koppelvlakspecificatie",
  "subtitle": "Koppelvlakspecificatie voor het beschikbaarstellen van DDAS-gegevens aan het CBS",
  "editors": [
    {
      "name": "Govert Claus",
      "company": "Programma DDAS",
      "companyURL": "https://www.divosa.nl/projecten/data-delen-armoede-en-schulden"
    }
  ],
  "github": "https://github.com/Govert-Claus/DDAS-API",
  "alternateFormats": [
    {
      "label": "pdf",
      "uri": "DDAS-API-Koppelvlakspecificatie.pdf"
    }
  ]
}</script>
<link rel="stylesheet" href="https://gitdocumentatie.logius.nl/publicatie/respec/style/base.css"></head>

<body class="h-entry informative toc-inline"><div class="head">
    <a class="logo" href="https://www.vng.nl"><img alt="VNG-Realisatie" height="77" id="VNG-Realisatie" src="https://vng-realisatie.github.io/VNG-R-Respec-Organization-configurations/media/logo-VNG-Realisatie.jpg">
  </a> <h1 id="title" class="title">DDAS API Koppelvlakspecificatie</h1>
    <h2 id="subtitle" class="subtitle">Koppelvlakspecificatie voor het beschikbaarstellen van DDAS-gegevens aan het CBS</h2>
    <h2>
      VNG Realisatie Standaard<br>
      In Ontwikkeling versie
      <time class="dt-published" datetime="2025-02-11">11 februari 2025</time>
    </h2>
    <dl>
      <dt>Deze versie:</dt><dd class="status">
              <a class="u-url status" href="https://vng-realisatie.github.io/publicatie/hl/respec-template/0.21">https://vng-realisatie.github.io/publicatie/hl/respec-template/0.21</a>
            </dd>
      <dt>Laatst gepubliceerde versie:</dt><dd>
              <a href="https://vng-realisatie.github.io/publicatie/hl/respec-template">https://vng-realisatie.github.io/publicatie/hl/respec-template</a>
            </dd>
      <dt>Laatste werkversie:</dt><dd><a href="https://govert-claus.github.io/DDAS-API/">https://govert-claus.github.io/DDAS-API/</a></dd>
      
      
      
      
      
      <dt>Redacteur:</dt>
      <dd class="editor p-author h-card vcard">
    <span class="p-name fn">Govert Claus</span> (<a class="p-org org h-org" href="https://www.divosa.nl/projecten/data-delen-armoede-en-schulden">Programma DDAS</a>)
  </dd>
      
      
      <dt>Doe mee:</dt><dd>
    <a href="https://github.com/Govert-Claus/DDAS-API/">GitHub Govert-Claus/DDAS-API</a>
  </dd><dd>
    <a href="https://github.com/Govert-Claus/DDAS-API/issues/">Dien een melding in</a>
  </dd><dd>
    <a href="https://github.com/Govert-Claus/DDAS-API/commits/">Revisiehistorie</a>
  </dd><dd>
    <a href="https://github.com/Govert-Claus/DDAS-API/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    <p>
          Dit document is ook beschikbaar in dit niet-normatieve formaat:
          <a rel="alternate" href="DDAS-API-Koppelvlakspecificatie.pdf">pdf</a>
        </p>
    <p class="copyright">
          Dit document valt onder de volgende licentie: 
          <a rel="license" href="https://eupl.eu/" class="subfoot"><img class="license" src="https://eupl.eu/eu.png" alt="Logo EUROPEAN UNION PUBLIC LICENCE v. 1.2"><br> EUROPEAN UNION PUBLIC LICENCE v. 1.2</a>
        </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Samenvatting</h2><p>Dit is de koppelvlakspecificatie voor de API waarmee schuldhulporganisaties gegevens beschikbaarstellen aan het CBS.
Dit is een product van het <a href="https://www.divosa.nl/projecten/data-delen-over-armoede-en-schulden">programma DDAS</a>. De API is gebaseerd op het <a href="https://vng-realisatie.github.io/ddas/v1.0/">informatie- en uitwisselmodel</a>.</p>
<p>Naast de uitgangspunten en de technische specificatie bevat dit document een beschrijving van de niet-functionele eisen (beschikbaarheid, performance). Ook worden het aanleverprotocol (welke stappen worden doorlopen als gegevens opgehaald worden) en het aansluitprotocol (hoe kan een organisatie deelnemer worden) beschreven. Ten slotte wordt het beheer van de specificatie zelf beschreven.</p>
<p><em><strong>In de huidige versie staan nog diverse vraagstukken en de keuzes die gemaakt worden, moeten nog worden bevestigd. Het document dient daarom vooral als basis voor de discussie om tot een definitieve specificatie te komen, en er kunnen geen rechten aan dit document ontleend worden.</strong></em></p>
</section>
  <section id="sotd" class="introductory"><h2>Status van dit document</h2><p>Dit document is nog 'In Ontwikkeling'.</p></section><nav id="toc"><h2 class="introductory" id="inhoudsopgave">Inhoudsopgave</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Samenvatting</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status van dit document</a></li><li class="tocline"><a class="tocxref" href="#kaders"><bdi class="secno">1. </bdi>Uitgangpunten</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#kaders-0"><bdi class="secno">1.1 </bdi>Kaders</a></li><li class="tocline"><a class="tocxref" href="#keuzes"><bdi class="secno">1.2 </bdi>Keuzes</a></li></ol></li><li class="tocline"><a class="tocxref" href="#overzicht"><bdi class="secno">2. </bdi>Overzicht API stelsel</a></li><li class="tocline"><a class="tocxref" href="#transport"><bdi class="secno">3. </bdi>Transportlaag</a></li><li class="tocline"><a class="tocxref" href="#iam"><bdi class="secno">4. </bdi>Identificatie, Authenticatie en Autorisatie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#identificatie"><bdi class="secno">4.1 </bdi>Identificatie</a></li><li class="tocline"><a class="tocxref" href="#authenticatie"><bdi class="secno">4.2 </bdi>Authenticatie</a></li><li class="tocline"><a class="tocxref" href="#autorisatie"><bdi class="secno">4.3 </bdi>Autorisatie</a></li></ol></li><li class="tocline"><a class="tocxref" href="#sign"><bdi class="secno">5. </bdi>Signing en Versleuteling</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#signeren-signing"><bdi class="secno">5.1 </bdi>Signeren (Signing)</a></li><li class="tocline"><a class="tocxref" href="#versleuteling-encryptie"><bdi class="secno">5.2 </bdi>Versleuteling (Encryptie)</a></li></ol></li><li class="tocline"><a class="tocxref" href="#messages"><bdi class="secno">6. </bdi>Berichten</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#encoding"><bdi class="secno">6.1 </bdi>Encoding</a></li><li class="tocline"><a class="tocxref" href="#vraagbericht-request"><bdi class="secno">6.2 </bdi>Vraagbericht (request)</a></li><li class="tocline"><a class="tocxref" href="#antwoordbericht-response"><bdi class="secno">6.3 </bdi>Antwoordbericht (response)</a></li></ol></li><li class="tocline"><a class="tocxref" href="#non-func"><bdi class="secno">7. </bdi>Niet functionele eisen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#beschikbaarheid"><bdi class="secno">7.1 </bdi>Beschikbaarheid</a></li><li class="tocline"><a class="tocxref" href="#performance"><bdi class="secno">7.2 </bdi>Performance</a></li><li class="tocline"><a class="tocxref" href="#logging-en-monitoring"><bdi class="secno">7.3 </bdi>Logging en Monitoring</a></li></ol></li><li class="tocline"><a class="tocxref" href="#aanlever"><bdi class="secno">8. </bdi>Aanleverprotocol</a></li><li class="tocline"><a class="tocxref" href="#aansluit"><bdi class="secno">9. </bdi>Aansluitprotocol</a></li><li class="tocline"><a class="tocxref" href="#beheer"><bdi class="secno">10. </bdi>Beheer van de specificatie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#indienen-wijzigingsverzoek"><bdi class="secno">10.1 </bdi>Indienen wijzigingsverzoek</a></li><li class="tocline"><a class="tocxref" href="#afhandelen-wijzigingsverzoek"><bdi class="secno">10.2 </bdi>Afhandelen wijzigingsverzoek</a></li><li class="tocline"><a class="tocxref" href="#releaseproces"><bdi class="secno">10.3 </bdi>Releaseproces</a></li><li class="tocline"><a class="tocxref" href="#releasenummering"><bdi class="secno">10.4 </bdi>Releasenummering</a></li><li class="tocline"><a class="tocxref" href="#vrijgaveprocedure-en-afwijkingsverzoeken"><bdi class="secno">10.5 </bdi>Vrijgaveprocedure en afwijkingsverzoeken</a></li><li class="tocline"><a class="tocxref" href="#noodprocedure"><bdi class="secno">10.6 </bdi>Noodprocedure</a></li><li class="tocline"><a class="tocxref" href="#escalatie"><bdi class="secno">10.7 </bdi>Escalatie</a></li></ol></li></ol></nav>
  <section id="kaders"><div class="header-wrapper"><h2 id="x1-uitgangpunten"><bdi class="secno">1. </bdi>Uitgangpunten</h2><a class="self-link" href="#kaders" aria-label="Permalink for Section 1."></a></div>
<section id="kaders-0"><div class="header-wrapper"><h3 id="x1-1-kaders"><bdi class="secno">1.1 </bdi>Kaders</h3><a class="self-link" href="#kaders-0" aria-label="Permalink for Section 1.1"></a></div>
<p>Het koppelvlak moet voldoen aan de volgende wetten, afspraken en standaarden:&nbsp;</p>
<ul>
<li><p><a href="https://www.noraonline.nl/wiki/NORA_online">NORA</a>&nbsp;</p>
</li>
<li><p><a href="https://www.bio-overheid.nl/">BIO</a></p>
</li>
<li><p><a href="https://logius-standaarden.github.io/Digikoppeling-Koppelvlakstandaard-REST-API/">Digikoppeling – REST-API profiel</a>&nbsp;</p>
</li>
<li><p><a href="https://docs.geostandaarden.nl/api/API-Strategie/">Nederlandse API strategie</a>&nbsp;</p>
</li>
<li><p><a href="https://logius-standaarden.github.io/API-Design-Rules/">NL Gov REST-API Design Rules</a>&nbsp;</p>
</li>
<li><p><a href="https://eur-lex.europa.eu/legal-content/NL/TXT/?uri=celex%3A32016R0679">Algemene verordening gegevensbescherming</a>&nbsp;</p>
</li>
<li><p><a href="https://wetten.overheid.nl/BWBR0015926/2022-03-02">Wet op het Centraal Bureau voor de Statistiek</a></p>
</li>
</ul>
<p>&nbsp;</p>
</section><section id="keuzes"><div class="header-wrapper"><h3 id="x1-2-keuzes"><bdi class="secno">1.2 </bdi>Keuzes</h3><a class="self-link" href="#keuzes" aria-label="Permalink for Section 1.2"></a></div>
<p>De volgende keuzes zijn gemaakt:&nbsp;</p>
<p><strong>Gegevensleveranciers bieden een API aan die rechtstreeks door CBS wordt bevraagd</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Dit uitwisselpatroon past het best bij het <a href="https://realisatieibds.nl/page/view/564cc96c-115e-4e81-b5e6-01c99b1814ec/de-ontwikkeling-van-het-federatief-datastelsel">Federatief Datastelsel</a>.</p>
</li>
<li><p>Gegevens blijven in de bron en worden bevraagd als ze nodig.</p>
</li>
<li><p>De API waarmee gegevens beschikbaar gesteld worden, kan hergebruikt worden voor andere toepassingen.</p>
</li>
<li><p>Dit patroon is besproken in de stuurgroep van 16 december 2024 en als voorkeurspatroon geaccepteerd (rekening houdend met de kanttekeningen die in de besproken beslisnotitie zijn meegegeven).</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Alle gegevensleveranciers moeten een API beschikbaar stellen waar de DDAS-gegevens opgevraagd kunnen worden.</p>
</li>
<li><p>De API moet voldoende beschikbaar zijn om CBS op de gewenste momenten te faciliteren.</p>
</li>
</ul>
<p><strong>Gebruik <a href="https://www.logius.nl/domeinen/gegevensuitwisseling/digikoppeling">Digikoppeling</a> REST profiel</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li>Dit profiel is het minst complexe profiel voor API's en past het beste bij een stelsel waar veel partijen aan deelnemen en in eigen tempo kunnen aansluiten.</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Alle leverende deelnemers dienen een API conform het REST profiel beschikbaar te stellen.</p>
</li>
<li><p>Omdat het Digikoppeling REST profiel nog geen keuze heeft gemaakt voor signing en encryptie, moet hier expliciet een keuze in gemaakt worden.</p>
</li>
</ul>
<p><strong>Gebruik <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/signing-jades/">JAdES</a> voor signen</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Omdat het REST profiel van Digikopeling (nog) geen standaard voor signen heeft vastgesteld, moet er een gekozen worden.</p>
</li>
<li><p>JAdES is als standaard voorgesteld door het <a href="https://www.geonovum.nl/themas/kennisplatform-apis">Kennisplatform API's</a>.</p>
</li>
<li><p>JAdES is gebaseerd op <a href="https://datatracker.ietf.org/doc/html/rfc7515">JWS</a>, de standaard voor signing van REST/JSON berichten die wereldwijd breed toegepast wordt.</p>
</li>
<li><p>JAdES plaatst het signen "naast" het bericht, zodat het bericht zelf niet beïnvloed wordt en ook zonder de signing gebruikt kan worden.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Alle berichten krijgen een ondertekening door de partij die het bericht verstuurd.</p>
</li>
<li><p>Voor ondertekenen is een certificaat nodig; alle deelnemers moeten een certificaat hebben dat vertrouwd wordt. NB: dit moet een ander certificaat zijn dan diegene die nodig is voor dubbelzijdig versleuteld transport (TLS).</p>
</li>
</ul>
<p><strong>Gebruik <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/encryption/">ADR-HTTP Payload encryption</a> voor encryptie&nbsp;<em>(NB: als encryptie vereist is - de verwachting is dat dit NIET nodig is)</em></strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Omdat het REST profiel van Digikopeling (nog) geen standaard voor encryptie heeft vastgesteld, moet er eentje gekozen worden.</p>
</li>
<li><p>De "payload encryption" is als standaard voorgesteld door het <a href="https://www.geonovum.nl/themas/kennisplatform-apis">Kennisplatform API's</a>.</p>
</li>
<li><p>De "payload encryption" standaard is gebaseerd op <a href="https://datatracker.ietf.org/doc/html/rfc7516">JWE</a>, de internationale standaard voor encryptie die breed toegepast wordt.</p>
</li>
<li><p>Als versleutelen nodig is, hoeven alleen de berichten waarin persoonsgegevens zitten versleuteld te worden. Dat zijn de responses van de gegevensleveranciers.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Alle berichten worden versleuteld door de partij die het bericht verstuurd.</p>
</li>
<li><p>Voor ondertekenen is een tweede certificaat nodig; dit moet een ander certificaat zijn dan het certificaat dat voor het ondertekenen gebruikt wordt. Omdat alleen de responses versleuteld worden, volstaat één extra certificaat bij CBS: het bericht wordt versleuteld met de publieke sleutel van de ontvanger (zie ook "Signing en Versleuteling").</p>
</li>
</ul>
<p><strong>Federatieve Services Connectiviteit voor de connectiviteit - <a href="https://docs.fsc.nlx.io/introduction">FSC</a></strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Deze standaard is verplicht als het REST profiel van Digikoppeling wordt gebruikt.</p>
</li>
<li><p>Door te kiezen voor een standaard, vereenvoudigt de complexiteit waar gemeenten met veel koppelingen mee te maken hebben.</p>
</li>
<li><p>Er bestaat een referentie implementatie die de inrichting en het gebruik van de API sterk vereenvoudigt. Verder is er bij VNG Realisatie (waar de standaard is ontwikkeld), het Federatief Datastelsel en RINIS kennis die gebruikt kan worden.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Alle deelnemers dienen de FSC componenten te installeren en in te richten. Er bestaat een algemene referentie implementatie, die waarschijnlijk zo ingezet kan worden. Als deze niet voldoet, kan overwogen worden om een specifieke referentie implementatie voor DDAS beschikbaar te stellen.</p>
</li>
<li><p>FSC gaat uit van dubbelzijdig versleuteld transport (TLS). Hiervoor hebben alle deelnemers van het DDAS-stelsel een certificaat nodig dat vertrouwd wordt.</p>
</li>
</ul>
<p><strong>Gebruik van FSC directory van RINIS</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>RINIS biedt een FSC directory aan voor alle overheidspartijen die de Digikoppeling standaard voor REST API's toepassen. Ook het DDAS stelsel mag daar gebruik van maken.</p>
</li>
<li><p>Door gebruik te maken van de directory bij RINIS is er geen beheer nodig voor de centrale directory.</p>
</li>
<li><p>RINIS wordt gezien als onafhankelijke partner, die door alle deelnemers vertrouwd wordt.</p>
</li>
<li><p>Door gebruik te maken van de directory van RINIS zijn de services (in principe) makkelijk te hergebruiken voor andere diensten binnen de overheid.</p>
</li>
<li><p>RINIS biedt de mogelijkheid om een eigen omgeving voor het DDAS stelsel te gebruiken, waar eigen voorwaarden voor deelname aan gekoppeld kunnen worden. <em>NB: er wordt nog overwogen of dit nodig is en meer voor- dan nadelen biedt</em></p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Het koppelvlak moet voldoen aan het REST profiel van de Digikoppeling standaard en gebruik maken van PKIo certificaten (dit is een voorwaarde om gebruik te maken van de voorziening van RINIS).</p>
</li>
<li><p>Alle deelnemers moeten hun endpoint (laten) registreren bij RINIS. Dit gebeurt als onderdeel van het aansluitprotocol en wordt gefaciliteerd door CBS of het programma DDAS.</p>
</li>
<li><p>Voor het ophalen van de gegevens, moet CBS de directory van RINIS bevragen om de lijst endpoints op te halen.</p>
</li>
</ul>
<p><strong><a href="https://json-schema.org/draft/2020-12/json-schema-validation">JSON formaat</a> voor berichten</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Het informatiemodel en het uitwisselmodel voor DDAS zijn in het JSON formaat ontwikkeld. Het is het eenvoudigst als de berichten dan ook in JSON formaat uitgewisseld worden.</p>
</li>
<li><p>JSON is goed leesbaar voor mensen, maar toch voldoende klein om ook grotere berichten uit te kunnen wisselen.</p>
</li>
<li><p>Vrijwel alle moderne informatiesystemen kunnen goed overweg met JSON berichten, wat de inrichting en het beheer vereenvoudigt.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li>De gegevens moeten in JSON formaat uitgewisseld worden.</li>
</ul>
<p><strong>Gebruik "open" internet voor transport</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Een (groot) aantal deelnemers in het DDAS-stelsel heeft geen toegang tot <a href="https://www.logius.nl/domeinen/infrastructuur/diginetwerk">Diginetwerk</a> en aansluiten via een <a href="https://www.logius.nl/domeinen/infrastructuur/diginetwerk/aansluiten">koppelnetwerkaanbieder</a> zal onevenredig veel inspanning, doorlooptijd en kosten met zich meebrengen.</p>
</li>
<li><p>Er zijn geen routeervoorzieningen of andere "tussenstations" in het stelsel voorzien, waardoor "Man in the Middle" aanvallen onwaarschijnlijk zijn.</p>
</li>
<li><p>Het transport wordt met dubbelzijdig TLS versleuteld, wat voldoende beveiliging geeft.</p>
</li>
<li><p>Middels de directory van FSC worden alleen vertrouwde endpoints aangeroepen.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li><p>Aansluiten op het stelsel vereist geen toegang tot een gesloten netwerk.</p>
</li>
<li><p>Het transport moet met dubbelzijdig TLS beveiligd worden.</p>
</li>
<li><p>Alleen endpoints die in de directory van FSC zijn vastgelegd, worden bevraagd.</p>
</li>
</ul>
<p><strong>Gebruik <a href="https://www.logius.nl/domeinen/toegang/pkioverheid">PKIoverheid certificaten</a>&nbsp;voor authenticatie, signing en encryptie</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li><p>Voor identicatie, authenticatie, signen en encryptie is een middel nodig dat door alle deelnemers van het stelsel vertrouwd wordt. PKIoverheid certificaten worden door de Nederlandse overheid uitgegeven, die daarmee de "Trust Anchor" voor het DDAS-stelsel wordt.</p>
</li>
<li><p>PKIoverheid certificaten worden door Logius (namens de rijksoverheid) via <a href="https://www.logius.nl/domeinen/toegang/pkioverheid/pkioverheidcertificaat-aanvragen">Logius geautoriseerde aanbieders</a> uitgegeven en beheerd. Er is daarom geen organisatie nodig om certificaten voor het DDAS-stelsel te beheren.</p>
</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li>Alle deelnemers moeten PKIoverheid certificaten hebben of krijgen.
  NB: er zijn certificaten nodig voor de transportlaag en het ondertekenen van berichten (hiervoor mag niet hetzelfde certificaat gebruikt worden). Mogelijk kunnen bestaande certificaten hergebruikt worden, maar hier moet voorzichtig mee omgegaan worden om beveiligingsniveaus gescheiden te houden.
  Als berichten met gevoelige gegevens ook versleuteld moeten worden, is een extra certificaat bij CBS vereist. De gegevensleveranciers gebruiken dan de publieke sleutel van dat certificaat om de berichten te versleutelen.</li>
</ul>
<p><strong>Beveiligingsniveau BBN2</strong></p>
<p>  <em>Rationale</em></p>
<ul>
<li>BBN2 is het niveau dat volgens GEMMA geldt voor gegevensverwerkingen in de schuldhulpverlening.</li>
</ul>
<p>  <em>Implicaties</em></p>
<ul>
<li>De BIO maatregelen moeten gericht zijn op het behalen van het beveiligingsniveau BBN2.</li>
</ul>
</section></section>
  <section id="overzicht"><div class="header-wrapper"><h2 id="x2-overzicht-api-stelsel"><bdi class="secno">2. </bdi>Overzicht API stelsel</h2><a class="self-link" href="#overzicht" aria-label="Permalink for Section 2."></a></div>
<p>In de onderstaande figuur staan de componenten geschetst die in het API berichtenverkeer een rol spelen.</p>


<p><img src="./docs/API-componenten.png" alt="overzicht API componenten"></p>


<p>In deze figuur betekent:</p>
<p>FDS: <a href="https://realisatieibds.nl/page/view/564cc96c-115e-4e81-b5e6-01c99b1814ec/de-ontwikkeling-van-het-federatief-datastelsel">Federatief Datastelsel</a> (hier niet relevant, maar dit schema is daaraan ontleend en geeft aan dat DDAS past in een Federatief Datastelsel)</p>
<p>Afnemer: CBS</p>
<p>Aanbieder: de schuldhulpverlenende organisatie of de gegevensleverancier hiervan</p>
<p>PKI: <a href="https://nl.wikipedia.org/wiki/Public_key_infrastructure">Public Key Infrastructure</a> - systeem voor het uitgeven en beheren van digitale certificaten</p>
<p>FSC: <a href="https://fsc-standaard.nl/">Federatieve Services Connectiviteit</a> - standaard voor het leggen van koppelingen m.b.v. API's</p>
<p>FTV: <a href="https://digilab.overheid.nl/projecten/toegangsverleningmethodiek-api/">Federatieve Toegangsverlening</a> - een standaard voor het inrichten en beheren van gecontroleerde toegang tot gegevensdiensten in een stelsel</p>
<p>Log: Logging t.b.v. monitoring en verantwoording</p>
<p>Deze specificatie richt zich primair op de beschrijving van de API (rechtsboven in de figuur bij de aanbieder van gegevens), maar ook de andere componenten worden benoemd.
Bent u enkele geïnteresseerd in de OpenAPI specificatie van de API? Deze staat onder het kopje "Berichten".</p>
</section>
  <section id="transport"><div class="header-wrapper"><h2 id="x3-transportlaag"><bdi class="secno">3. </bdi>Transportlaag</h2><a class="self-link" href="#transport" aria-label="Permalink for Section 3."></a></div>
<p>Het transport van de berichten verloopt volgens de <a href="https://fsc-standaard.nl/">FSC-standaard</a>. De belangrijkste aspecten van deze standaard zijn:</p>
<ul>
<li><p>Dubbelzijdig TLS. NB: Dit vereist een certificaat dat door alle betrokken partijen vertrouwd wordt.</p>
</li>
<li><p>Gebruik van PKIo certificaten voor authenticatie op basis van het <a href="https://gitdocumentatie.logius.nl/publicatie/api/oauth/">Nederlandse profiel van OAuth</a>. Deze zijn aan te vragen bij door <a href="https://www.logius.nl/domeinen/toegang/pkioverheid/pkioverheidcertificaat-aanvragen">Logius geautoriseerde aanbieders</a> - er is een "services" certificaat nodig met EKU (Extended Key Usage) "TLS Web Client Authentication".</p>
</li>
<li><p>Berichten lopen via FSC-componenten "outway gateway" van de afnemer (CBS) en "inway gateway" van de gegevensleverancier met de API.</p>
</li>
<li><p>De "directory" van FSC waarin alle endpoints van de gegevensleveranciers staan wordt beheerd door <a href="https://www.rinis.nl/nl/">RINIS</a>.</p>
</li>
<li><p>Geen gebruik van Diginetwerk - de betrokken organisaties zijn daar niet op aangesloten. Transport gaat via het “open” internet.</p>
</li>
</ul>
</section>
  <section id="iam"><div class="header-wrapper"><h2 id="x4-identificatie-authenticatie-en-autorisatie"><bdi class="secno">4. </bdi>Identificatie, Authenticatie en Autorisatie</h2><a class="self-link" href="#iam" aria-label="Permalink for Section 4."></a></div>
<p>Het bijhouden van de deelnemers in het DDAS-stelsel gebeurt door CBS in een directory die door FSC gebruikt wordt. Alle deelnemers gebruiken deze directory bij het uitwisselen van berichten.</p>
<section id="identificatie"><div class="header-wrapper"><h3 id="x4-1-identificatie"><bdi class="secno">4.1 </bdi>Identificatie</h3><a class="self-link" href="#identificatie" aria-label="Permalink for Section 4.1"></a></div>
<ul>
<li>Hoe worden de gegevensleveranciers geïdentificeerd? Als het mogelijk is wordt hiervoor het (sub)OIN van de gegevensleverancier gebruikt. Als de gegevensleverancier geen (sub)OIN heeft, dan moet een unieke identifier gekozen worden, waarmee ook het PKIo certificaat aangevraagd kan worden (vermoedelijk het KvK-nummer?).</li>
</ul>
</section><section id="authenticatie"><div class="header-wrapper"><h3 id="x4-2-authenticatie"><bdi class="secno">4.2 </bdi>Authenticatie</h3><a class="self-link" href="#authenticatie" aria-label="Permalink for Section 4.2"></a></div>
<ul>
<li>Systemen worden geauthenticeerd met behulp van het PKIo certificaat.</li>
</ul>
</section><section id="autorisatie"><div class="header-wrapper"><h3 id="x4-3-autorisatie"><bdi class="secno">4.3 </bdi>Autorisatie</h3><a class="self-link" href="#autorisatie" aria-label="Permalink for Section 4.3"></a></div>
<p>Er is voorlopig maar één service met een vaste set gegevens, waar maar één partij (CBS) toegang toe zal krijgen. Daarom is er geen autorisatie nodig, anders dan het verkrijgen van toegang tot de service. Partijen die toegang hebben tot de service zijn geautoriseerd om gegevens te bevragen. Deze autorisatie ligt vast in de directory van FSC, die door CBS beheerd wordt.</p>
<p>Als fijnmaziger autorisatie nodig is, dan bestaat er een voorkeur voor PBAC (Policy Base Authorisation Control). De autorisatie wordt dan bepaald op basis van beleidsregels, zoals “organisatie X krijgt toegang tot gegeven G als de organisatie overeenkomst O getekend heeft en het gegeven is vrijgegeven door autoriteit A”. Het is dan nog wel de vraag wie deze beleidsregels vaststelt en wie ze beheert.</p>
</section></section>
  <section id="sign"><div class="header-wrapper"><h2 id="x5-signing-en-versleuteling"><bdi class="secno">5. </bdi>Signing en Versleuteling</h2><a class="self-link" href="#sign" aria-label="Permalink for Section 5."></a></div>
<section id="signeren-signing"><div class="header-wrapper"><h3 id="x5-1-signeren-signing"><bdi class="secno">5.1 </bdi>Signeren (Signing)</h3><a class="self-link" href="#signeren-signing" aria-label="Permalink for Section 5.1"></a></div>
<p>Alle berichten moeten ge-signed worden om de authenticiteit en onweerlegbaarheid van het berichtenverkeer te garanderen.</p>
<p>Signing gebeurt op basis van <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/signing-jades/">ADR-HTTP Message and payload signing with JAdES</a> - zie "Uitgangspunten" voor de onderbouwing hiervoor.&nbsp;
Het signeren van het bericht gebeurt met de privé sleutel van de verzender van het bericht, zodat de controle met de publieke sleutel van de verzender kan gebeuren en in principe iedereen de handtekening kan controleren. Iedere deelnemer van het DDAS-stelsel heeft dus een certificaat nodig voor het ondertekenen van de berichten. Dit moet een ander certificaat zijn dan welke voor het transport gebruikt wordt! Ook dit certificaat is een "services" certificaat, maar met EKU (Extended Key Usage) "Digital Signature".</p>
</section><section id="versleuteling-encryptie"><div class="header-wrapper"><h3 id="x5-2-versleuteling-encryptie"><bdi class="secno">5.2 </bdi>Versleuteling (Encryptie)</h3><a class="self-link" href="#versleuteling-encryptie" aria-label="Permalink for Section 5.2"></a></div>
<p>Is versleuteling nodig? Er zijn vooralsnog geen routeervoorzieningen nodig berichten mogelijk gelezen kunnen worden, en het transport is dubbelzijdig versleuteld. Het transport loopt wel over het "open" internet.</p>
<p>Voorstel: Geen versleuteling.</p>
<p>Als versleuteling toch vereist wordt, dan versleuteling op basis van <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/encryption/">ADR-HTTP Payload encryption</a>.
De versleuteling gebeurt met de publieke sleutel van de ontvanger, zodat alleen de ontvanger het bericht kan ontsleutelen. De sleutel mag niet dezelfde zijn als die voor signing of TLS wordt gebruikt; er is dus een extra certificaat nodig voor versleutelen.
Alleen de berichten met gevoelige (persoons)gegevens moeten versleuteld worden. Dit zijn de response-berichten van de gegevensleveranciers - in de request-berichten van CBS zitten geen gevoelige gegevens. Dit betekent dat er voor versleuteling één extra certificaat nodig is: bij CBS.</p>
</section></section>
  <section id="messages"><div class="header-wrapper"><h2 id="x6-berichten"><bdi class="secno">6. </bdi>Berichten</h2><a class="self-link" href="#messages" aria-label="Permalink for Section 6."></a></div>
<p>De technische beschrijving van de API is het volgende OAS3-bestand beschreven.</p>
<pre><code aria-busy="false" class="hljs">{!../v0.1/DDAS-API_v0.1.1.yaml!}
</code></pre>
<p>Hiervan is ook een <a href="https://github.com/Govert-Claus/DDAS-API/blob/main/v0.1/DDAS-API_v0.1.1.yaml">downloadbare versie</a> van.</p>
<p>Hieronder worden de berichten die in het OAS-bestand technisch beschreven zijn, toegelicht.</p>
<section id="encoding"><div class="header-wrapper"><h3 id="x6-1-encoding"><bdi class="secno">6.1 </bdi>Encoding</h3><a class="self-link" href="#encoding" aria-label="Permalink for Section 6.1"></a></div>
<p>Conform de <a href="https://vng-realisatie.github.io/ddas/v1.0/uitwisselspecificatie/">uitwisselspecificatie</a> die voor de bestandsuitwisseling gebruikt wordt, is de encoding van de berichten UTF-8.</p>
</section><section id="vraagbericht-request"><div class="header-wrapper"><h3 id="x6-2-vraagbericht-request"><bdi class="secno">6.2 </bdi>Vraagbericht (request)</h3><a class="self-link" href="#vraagbericht-request" aria-label="Permalink for Section 6.2"></a></div>
<p>Dit is het vraagbericht zoals dat door CBS naar de schuldhulpverlener gestuurd wordt. Alleen een POST request: alleen opvragen gegevens, geen mutaties. Bij GET zitten de parameters in de URL, waardoor mogelijk cache gegevens gebruikt worden, als de parameters niet wijzigen - daarom alleen een POST.</p>
<p>Voorstel voor parameters die meegestuurd kunnen worden (allemaal optioneel):</p>
<ul>
<li><p>Startdatum (date, default leeg - deelnemer bepaalt dan startdatum)</p>
</li>
<li><p>Einddatum (date, default leeg - deelnemer bepaalt dan einddatum)</p>
</li>
<li><p>Aanleverende_organisatie (string, default alle – alleen relevant als over meer dan 1 organisatie (gemeente/ schuldhulpverlener) gegevens aangeleverd worden)</p>
</li>
</ul>
<p>Het bericht wordt met <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/signing-jades/">JAdES</a> ondertekend met de private sleutel van de verzender van het vraagbericht.</p>
</section><section id="antwoordbericht-response"><div class="header-wrapper"><h3 id="x6-3-antwoordbericht-response"><bdi class="secno">6.3 </bdi>Antwoordbericht (response)</h3><a class="self-link" href="#antwoordbericht-response" aria-label="Permalink for Section 6.3"></a></div>
<p>Dit is het antwoordbericht van de gegevensbeheerder (systeem dat de bron beheert) met de gewenste gegevens in JSON formaat.</p>
<p>Ook dit bericht wordt ondertekend met <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/signing-jades/">JAdES</a> met gebruik van de eigen private sleutel.</p>
<p>Als versleutelen nodig is (vooralsnog wordt ervan uitgegaan dat dit niet nodig is), wordt het bericht versleuteld conform <a href="https://geonovum.github.io/KP-APIs/API-strategie-modules/encryption/">ADR-HTTP Payload encryption</a> met de publieke sleutel van de afnemer waar het antwoordbericht naartoe gaat (in dit geval altijd CBS). Of dit noodzakelijk is, is nog een punt van dicussie - vooralsnog wordt ervan uitgegaan dat dit niet nodig is.
In de OAS3.1 specificatie is alleen signing opgenomen, geen versleuteling. Mocht versleutelen vereist zijn, dan wordt de API als volgt beschreven: <a href="https://github.com/Govert-Claus/DDAS-API/blob/main/v0.1/DDAS-API_v0.1.2.yaml">OAS3.1 specificatie met versleuteling</a>.</p>
<p>Payload is gebaseerd op <a href="https://vng-realisatie.github.io/ddas/v1.0/uitwisselspecificatie/">uitwisselspecificatie</a>!</p>
<p>Mogelijke responses:</p>
<ul>
<li><p>200: bericht goed verwerkt (met versleutelde en gesigneerde payload)</p>
</li>
<li><p>Foutberichten moeten nog bepaald worden - nu zijn 400 (ongeldig verzoek) en 401 (Ongeautoriseerd, OAuth2-token vereist) opgenomen</p>
</li>
</ul>
</section></section>
  <section id="non-func"><div class="header-wrapper"><h2 id="x7-niet-functionele-eisen"><bdi class="secno">7. </bdi>Niet functionele eisen</h2><a class="self-link" href="#non-func" aria-label="Permalink for Section 7."></a></div>
<section id="beschikbaarheid"><div class="header-wrapper"><h3 id="x7-1-beschikbaarheid"><bdi class="secno">7.1 </bdi>Beschikbaarheid</h3><a class="self-link" href="#beschikbaarheid" aria-label="Permalink for Section 7.1"></a></div>
<p>Niet kritische toepassing: geen hoge beschikbaarheid vereist.&nbsp;</p>
<p>Afstemmen met CBS: wanneer willen zij gegevens verzamelen? Dan zou de beschikbaarheid wat hoger moeten zijn. BV: tijdens kantooruren&nbsp;&nbsp;</p>
</section><section id="performance"><div class="header-wrapper"><h3 id="x7-2-performance"><bdi class="secno">7.2 </bdi>Performance</h3><a class="self-link" href="#performance" aria-label="Permalink for Section 7.2"></a></div>
<p>Geen afhankelijkheden in het primaire proces: geen hoge performance vereist.&nbsp;</p>
<p>Wordt gebruik van cache toegestaan (volgens mij moet dat kunnen)? Onder welke voorwaarden?&nbsp;</p>
</section><section id="logging-en-monitoring"><div class="header-wrapper"><h3 id="x7-3-logging-en-monitoring"><bdi class="secno">7.3 </bdi>Logging en Monitoring</h3><a class="self-link" href="#logging-en-monitoring" aria-label="Permalink for Section 7.3"></a></div>
<p>Verantwoordelijkheid voor monitoring ligt bij partij die verantwoording hierover moet afleggen. Omdat er persoonsgegevens verwerkt worden, moet in elk geval rekening gehouden worden met de AVG. Daarom moet gelogd worden welke BSN's met wie uitgewisseld worden. Hierover moet ook gerapporteerd kunnen worden naar de betrokken burgers.</p>
<p>Vraag: Welke verantwoording verwacht het programma of SZW?&nbsp;</p>
<p>Voor gemeenten (suggestie):&nbsp;</p>
<ul>
<li><p>Aantal bevragingen naar datum en afzender (dat zou altijd CBS moeten zijn).</p>
</li>
<li><p>Aantal en soort foute bevragingen.</p>
</li>
<li><p>Aantal en soort meegestuurde parameters.</p>
</li>
<li><p>Uitgewisselde BSN's met afnemer (altijd CBS?), zodat een burger inzicht kan krijgen in wie wanneer zijn gegevens heeft opgevraagd.
NB: BSN's zijn persoonsgegevens. Als deze in de logging worden vastgelegd, moeten de privacy van die gegevens gegarandeerd worden. In de DPIA moet vastgelegd worden welke maatregelen hiervoor getroffen worden.</p>
</li>
</ul>
<p>Voor CBS (suggestie):&nbsp;</p>
<ul>
<li><p>Aantal bevragingen naar datum en schuldhulpverlener.</p>
</li>
<li><p>Aantal en soort (evt foutcodes) responses.</p>
</li>
</ul>
</section></section>
  <section id="aanlever"><div class="header-wrapper"><h2 id="x8-aanleverprotocol"><bdi class="secno">8. </bdi>Aanleverprotocol</h2><a class="self-link" href="#aanlever" aria-label="Permalink for Section 8."></a></div>
<p>Stappen bij het aanleveren van gegevens:&nbsp;</p>
<ul>
<li><p>CBS bevraagt de FSC directory bij RINIS om de endpoints van de gegevensleveranciers op te halen</p>
</li>
<li><p>CBS roept via de FSC-outway de FSC-inway en daarmee de API van de gegevensleverancier aan (eventueel met parameters)&nbsp;met een requestbericht dat gesigneerd is met privé sleutel van CBS</p>
</li>
<li><p>De gegevensleverancier controleert de signatuur met de publieke sleutel van CBS</p>
</li>
<li><p>Indien OK, dan stuurt de gegevensleverancier de gegevens in het responsebericht dat gesigneerd is met eigen privé sleutel</p>
</li>
<li><p>CBS controleert response technisch (signing, berichtformaat, viruscontrole)</p>
</li>
<li><p>CBS controleert response functioneel/ inhoudelijk (relatie tussen velden, vreemde waarden, etc.)</p>
</li>
<li><p>CBS stuurt een verwerkingsverslag ("op orde bericht") naar de gegevensleverancier <em>[nog ter discussie hoe dit het beste kan]</em></p>
</li>
<li><p>Indien OK, dan worden de gegevens bij CBS ingelezen in de database&nbsp;</p>
</li>
<li><p>CBS loopt alle gerapporteerde trajecten af en combineert trajecten van dezelfde BSN bij dezelfde gemeente tot één “traject”</p>
</li>
<li><p>CBS genereert de gewenste statistieken</p>
</li>
</ul>
<p>&nbsp;</p>
<p>NB: Als er bij deze stappen algoritmen gebruikt worden, moeten deze voldoen aan de Europese AI-verordening (definitieve tekst nog niet gevonden) en aangemeld worden bij het <a href="https://algoritmes.overheid.nl/nl">Algoritmeregister van de Nederlandse overheid</a>.</p>
</section>
  <section id="aansluit"><div class="header-wrapper"><h2 id="x9-aansluitprotocol"><bdi class="secno">9. </bdi>Aansluitprotocol</h2><a class="self-link" href="#aansluit" aria-label="Permalink for Section 9."></a></div>
<p>Iedere schuldhulpverleningsorganisatie of gemeente, eventueel via een gegevensleverancier (hierna: "deelnemer") die gegevens beschikbaar gaat stellen aan CBS, moet het aansluitprotocol doorlopen. Dit protocol valt onder verantwoordelijkheid van het programma DDAS. Voor vragen hierover kan altijd contact opgenomen worden met <em>[contactadres]</em>.</p>
<p>Het protocol kan aangepast worden als hiervoor aanleiding is. Na aanpassingen wordt de meest recente versie met versienummer en versiedatum gepubliceerd op <em>[documentatiewebsite]</em>.</p>
<p>De stappen die de deelnemer moet doorlopen, zijn:</p>
<ul>
<li><p>De deelnemer meldt zich bij de stelselbeheerder (CBS of DDAS?) via het aanmeldformulier <em>[waar staat dit? wie beheert dit?]</em>, waarin in elk geval het volgende ingevuld:</p>
<ul>
<li><p>Naam van de deelnemer + contactgegevens</p>
</li>
<li><p>Naam van de gegevensleverancier + contactgegevens</p>
</li>
<li><p>Endpoint waar de productiegegevens beschikbaar komen</p>
</li>
<li><p>Endpoint waar de testgegevens beschikbaar komen</p>
</li>
<li><p>Akkoord met de aansluitvoorwaarden*, waaronder de verwerkersovereenkomst met CBS?*</p>
</li>
<li><p>Eventuele verzoeken om de aansluiting tot stand te krijgen, zoals een gewenste publicatiedatum, specifieke testdata of specifieke beschikbaarheid</p>
</li>
</ul>
</li>
<li><p><em>Indien PKIo certificaten niet mogelijk zijn: de stelselbeheerder (DDAS of CBS?) genereert een certificaat voor de TLS verbinding, signing en encryptie, en levert deze aan de deelnemer.</em></p>
</li>
<li><p>De deelnemer richt in de testomgeving de API, conform de <a href="../v0.1/DDAS-API_v0.1.1.yaml">AOS documentatie</a> in. Voor de installatie van FSC komt een handleiding en een referentie implementatie beschikbaar.</p>
</li>
<li><p>De deelnemer voert CBS op in de management module van FSC, om toegang te verlenen.</p>
</li>
<li><p>CBS voert enkele bevragingen uit in de testomgeving en beoordeelt de kwaliteit van de gegevens. Op basis van de bevindingen wordt de API aangepast.</p>
</li>
<li><p>Indien er geen blokkerende bevindingen zijn, krijgt de deelnemer vrijgave van de stelselbeheer (DDAS?) en wordt de API in de productieomgeving ingericht en beschikbaar gesteld.</p>
</li>
<li><p>CBS laat de deelnemer opvoeren in de FSC management module van RINIS, zodat de API beschikbaar komt in het stelsel en bevraagd kan worden bij het ophalen van alle gegevens.</p>
</li>
</ul>
<p>Ten behoeve van de testen stelt DDAS een set testgegevens beschikbaar <em>[wie maakt deze set? waar komt dit te staan?]</em>.</p>
<p>Voor ondersteuning bij de aansluiting is een referentie implementatie en documentatie beschikbaar <em>[waar?]</em> en kan contact opgenomen worden met <em>[contactadres]</em>. Als er bij de aansluiting bevindingen zijn, die niet door de deelnemer opgelost kunnen worden, kan een wijzigingsverzoek ingediend worden.</p>
</section>
  <section id="beheer"><div class="header-wrapper"><h2 id="x10-beheer-van-de-specificatie"><bdi class="secno">10. </bdi>Beheer van de specificatie</h2><a class="self-link" href="#beheer" aria-label="Permalink for Section 10."></a></div>
<p>De koppelvlakspecificatie is onderhevig aan wijzigingen: de technologie ontwikkelt zich, er zijn mogelijk andere gegevens nodig, de samenwerking tussen de betrokken partijen kan wijzigen, etc. Om deze wijzigingen op een betrouwbare en juiste manier te verwerken in de specificatie, is een wijzigingsproces ingericht. Dit wijzigingsproces valt onder verantwoordelijkheid van de stuurgroep DDAS en wordt uitgevoerd door het programma DDAS, zolang het programma DDAS actief is. Daarna wordt het overgedragen aan een nog aan te wijzen organisatie.&nbsp;Voor het beoordelen van wijzigingsverzoeken wordt een beheeroverleg samengesteld, met afgevaardigden van de betrokken partijen, onder voorzitterschap van het programma DDAS. Dit beheeroverleg komt periodiek bijeen om wijzigingsverzoeken te beoordelen en eventueel verder uit te werken.</p>
<p>Het streven is om maximaal eenmaal per jaar een nieuw release van de koppelvlakspecificatie uit te brengen.</p>
<section id="indienen-wijzigingsverzoek"><div class="header-wrapper"><h3 id="x10-1-indienen-wijzigingsverzoek"><bdi class="secno">10.1 </bdi>Indienen wijzigingsverzoek</h3><a class="self-link" href="#indienen-wijzigingsverzoek" aria-label="Permalink for Section 10.1"></a></div>
<p>Wijzigingsverzoeken worden verzameld via [nog in te vullen]. Alle betrokken partijen mogen wijzigingsverzoeken indienen. Er is geen template voor het indienen van een wijzigingsverzoek, maar het verzoek moet in elk geval de volgende informatie bevatten:&nbsp;</p>
<ul>
<li><p>Indiener (inclusief contactgegevens)&nbsp;</p>
</li>
<li><p>Datum indienen&nbsp;</p>
</li>
<li><p>Beschrijving gewenste wijziging (bondig, maar voldoende specifiek om in te kunnen schatten wat de impact is)&nbsp;</p>
</li>
<li><p>Onderbouwing/ aanleiding gewenste wijziging&nbsp;</p>
</li>
<li><p>Prioriteit volgens de indiener (hoe snel moet de wijziging doorgevoerd worden)</p>
</li>
</ul>
<p>&nbsp;</p>
<p>Als het aantal wijzigingsverzoeken groot wordt of de afhandeling daarvan complex, dan wordt een systeem gebruikt om een en ander in te administreren.&nbsp;</p>
<p>Dit systeem moet zo openbaar mogelijk zijn, om zo transparant mogelijk te zijn over de afhandeling van verzoeken en om te voorkomen dat dezelfde wijzigingsverzoeken meerdere malen ingediend worden.</p>
</section><section id="afhandelen-wijzigingsverzoek"><div class="header-wrapper"><h3 id="x10-2-afhandelen-wijzigingsverzoek"><bdi class="secno">10.2 </bdi>Afhandelen wijzigingsverzoek</h3><a class="self-link" href="#afhandelen-wijzigingsverzoek" aria-label="Permalink for Section 10.2"></a></div>
<p>Het wijzigingsverzoek wordt door het programma DDAS geanalyseerd, waarbij vastgesteld wordt welke onderdelen van de specificatie geraakt worden en wat de geschatte impact is op de specificatie, de techniek, de processen en de betrokken partijen. Tevens wordt ingeschat wat de randvoorwaarden, kosten en doorlooptijd van de gewenste wijziging zouden zijn. Dit leidt tot een voorstel voor de verdere afhandeling: of, hoe en wanneer dit wijzigingsverzoek doorgevoerd wordt.&nbsp;</p>
<p>Het wijzigingsverzoek met de analyse van het programma DDAS worden besproken in het (nog in te richten) beheeroverleg DDAS. Als alle betrokken partijen akkoord gaan met de voorgestelde afhandeling, wordt deze afhandeling gevolgd (d.w.z. inplannen voor een release, via noodprocedure eerder doorvoeren, of afwijzen van het verzoek).&nbsp;</p>
</section><section id="releaseproces"><div class="header-wrapper"><h3 id="x10-3-releaseproces"><bdi class="secno">10.3 </bdi>Releaseproces</h3><a class="self-link" href="#releaseproces" aria-label="Permalink for Section 10.3"></a></div>
<p>Wijzigingen die doorgevoerd moeten worden, worden zoveel mogelijk via een release in productie gebracht. Het streven is om maximaal eenmaal per jaar een release door te voeren. De stappen die hiervoor doorlopen worden zijn:</p>
<ul>
<li><p>Vaststellen scope van de release door de stuurgroep DDAS, op basis van advies van beheeroverleg [6 maanden voor productiedatum]</p>
</li>
<li><p>Publiceren aangepaste specificatie door programma DDAS [5 maanden voor productiedatum]</p>
</li>
<li><p>Doorvoeren noodzakelijke wijzigingen in de testomgeving door deelnemers (gegevensleveranciers en CBS) [tot 1 maand voor productiedatum]</p>
</li>
<li><p>Testen nieuwe release in testomgeving [in laatste maand voor productiedatum]</p>
</li>
<li><p>Livegang nieuwe release</p>
</li>
</ul>
</section><section id="releasenummering"><div class="header-wrapper"><h3 id="x10-4-releasenummering"><bdi class="secno">10.4 </bdi>Releasenummering</h3><a class="self-link" href="#releasenummering" aria-label="Permalink for Section 10.4"></a></div>
<p>Ieder release wordt aangeduid met een releasenummer. Deze krijgt de vorm X.Y, waarbij X het "major" nummer is en Y het "minor" nummer. Voor testreleases kan een derde nummer toegevoegd worden; het zogenaamde "patch" nummer. In de productieomgeving wordt geen patch nummer gebruikt.</p>
<p>Als een release via het reguliere releaseproces naar productie gaat, dan krijgt deze een nieuw major nummer en het minor nummer 0 (bv. "1.0"). Als er via de noodprocedure een release doorgevoerd wordt, dan blijft het major nummer hetzelfde, maar wordt het minor nummer opgehoogd (bv. "1.1").</p>
</section><section id="vrijgaveprocedure-en-afwijkingsverzoeken"><div class="header-wrapper"><h3 id="x10-5-vrijgaveprocedure-en-afwijkingsverzoeken"><bdi class="secno">10.5 </bdi>Vrijgaveprocedure en afwijkingsverzoeken</h3><a class="self-link" href="#vrijgaveprocedure-en-afwijkingsverzoeken" aria-label="Permalink for Section 10.5"></a></div>
<p>Er is geen "vrijgave" van deelnemers voor een release nodig. Als de specificatie complexer wordt kan de stuurgroep DDAS besluiten om een vrijgaveprocedure in te richten. De deelnemer moet dan aan de hand van een set testscenario's aantonen te voldoen aan de nieuwe specificaties. Als dit succesvol is, dan krijgt de deelnemer vrijgave voor de nieuwe release. Als dit niet succesvol is, dan kan de deelnemer een afwijkingsverzoek indienen bij het programma DDAS en toch gegevens blijven aanbieden. Een afwijkingsverzoek wordt alleen geaccepteerd als dit de rapporten van CBS niet compromitteert. In het afwijkingsverzoek wordt altijd aangegeven hoe lang de afwijking geldig mag blijven.</p>
</section><section id="noodprocedure"><div class="header-wrapper"><h3 id="x10-6-noodprocedure"><bdi class="secno">10.6 </bdi>Noodprocedure</h3><a class="self-link" href="#noodprocedure" aria-label="Permalink for Section 10.6"></a></div>
<p>Het kan gebeuren dat een wijziging niet kan wachten op een gepland release, maar sneller doorgevoerd moet worden. De stuurgoep DDAS kan dan op advies van het beheeroverleg, een noodprocedure aanroepen.</p>
<p>Het beheeroverleg adviseert de stuurgroep welke stappen genomen moeten worden en in welk tempo deze doorlopen moeten worden. Als de stuurgroep hiermee akkoord gaat, voert het programma DDAS de regie op de uitvoering van de stappen.</p>
<p>De release die hiermee ontstaat krijgt geen nieuw "major" versienummer, maar een nieuw "minor" nummer (zie ook "releasenummering").</p>
</section><section id="escalatie"><div class="header-wrapper"><h3 id="x10-7-escalatie"><bdi class="secno">10.7 </bdi>Escalatie</h3><a class="self-link" href="#escalatie" aria-label="Permalink for Section 10.7"></a></div>
<p>Als de partijen het niet eens worden, wordt het verzoek geëscaleerd naar de stuurgroep DDAS. Als het behandelen van het verzoek niet kan wachten tot het eerstvolgende overleg van de stuurgroep, worden de stuurgroepleden schriftelijk om hun oordeel gevraagd.</p>
</section></section>
  <script>
    let content = "";

    const getClass = function(key) {
      if (respecConfig.content[key]!==""){return <code> class="${respecConfig.content[key]}"</code>}
    }

    for (let contentKey in respecConfig.content) {
      content += <code>&lt;section data-include-format="markdown" data-include="${contentKey}.md" ${getClass(contentKey)||""}&gt;&lt;/section&gt;</code>
    }

    document.getElementById("probl").insertAdjacentHTML('afterend', content);
  </script>

  <section id="tof"></section>





<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><div class="sidelabel">VNG Realisatie Standaard - In Ontwikkeling versie</div><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>